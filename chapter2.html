<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Functional composition - Functional Programming in Typescript</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="custom.css">
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../README.html">Foreword</a></li><li class="chapter-item expanded "><a href="chapter1.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="chapter2.html" class="active"><strong aria-hidden="true">2.</strong> Functional composition</a></li><li class="chapter-item expanded "><a href="chapter3.html"><strong aria-hidden="true">3.</strong> Option</a></li><li class="chapter-item expanded "><a href="chapter4.html"><strong aria-hidden="true">4.</strong> Either</a></li><li class="chapter-item expanded "><a href="chapter5.html"><strong aria-hidden="true">5.</strong> Functor</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Functional Programming in Typescript</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/alenkis/functional-programming-typescript-book" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="functional-composition"><a class="header" href="#functional-composition">Functional composition</a></h1>
<p>Since functional composition is a central theme of functional programming, we will introduce some helpers that will make our lives easier: <code>flow</code>, <code>pipe</code> and <code>apply</code>.</p>
<h3 id="flow"><a class="header" href="#flow">Flow</a></h3>
<p>It's useful to think about types when composing functions, for example:</p>
<pre><code class="language-typescript">const multBy10 = (a: number): number =&gt; a * 10;
const increment = (a: number): number =&gt; a + 1;
</code></pre>
<p>Both these functions take a <code>number</code> and return a <code>number</code>. Their type signatures are <code>number =&gt; number</code>. If we want to <em>compose</em> these two, we can think of &quot;plugging&quot; the ouput of the first to the input of the second function, like this:</p>
<pre><code class="language-typescript">  A           B           C
number  =&gt;  number  =&gt;  number
^- increment -^
              ^-- multBy10 --^
</code></pre>
<p>If we have a function <code>increment</code> (<code>A =&gt; B</code>), and a function <code>multBy10</code> (<code>B =&gt; C</code>), we can create a <em>new</em> function that would have a type signature <code>A =&gt; C</code></p>
<pre><code class="language-typescript">import { flow } from &quot;fp-ts/lib/function&quot;;

const composedFn = flow(increment, multBy10);
composedFn(1); // 20
</code></pre>
<p>This is equivalent to:</p>
<pre><code class="language-typescript">const result = multBy10(increment(1)); // 20
</code></pre>
<p>You will notice that the order is different. With <code>flow</code>, we can read from left to right, while with traditional approach we would have to read from the inside out.</p>
<pre><code class="language-typescript">flow(a, b, c)(1) === c(b(a(1)));
</code></pre>
<h3 id="pipe"><a class="header" href="#pipe">Pipe</a></h3>
<p>Pipe is very similar to flow, the only difference is that the first value <code>pipe</code> takes is the value itself, which is then applied to a composition of an arbitrary number of functions.</p>
<pre><code class="language-typescript">pipe(
  value, // value
  f1,    // f1(value)
  f2,    // f2(f1(value))
  f3,    // f3(f2(f1(value)))
  ...,   // ...etc
  fn
)
</code></pre>
<p>Our previous example would look like this:</p>
<pre><code class="language-typescript">import { pipe } from &quot;fp-ts/lib/function&quot;;

const result = pipe(1, increment, multBy10); // 20
</code></pre>
<p>If we ever need to add an additional function, we just need to insert it in this &quot;pipeline&quot; of tranformations, compared to nested function calls where we'd need to mess with parentheses as well.</p>
<h3 id="currying"><a class="header" href="#currying">Currying</a></h3>
<p>As we've seen, <code>flow</code> returns a function that further expects it's argument; it's <em>curried</em>.</p>
<p>Curried functions are functions which don't accept all of their arguments at once, instead they accept it one argument at a time, each time returning a new function. Some languages like Haskell and Elm don't even have a notion of multi-argument functions, <em>all</em> functions are automatically curried. This provides an important benefit - <em>partial application</em></p>
<p>We'll often write functions that return new functions in the following style:</p>
<pre><code class="language-typescript">const add3Numbers =
  (a: number) =&gt;
  (b: number) =&gt;
  (c: number): number =&gt;
    a + b + c;

// instead of
const add3Numbers_ = (a: number, b: number, c: number): number =&gt; a + b + c;
</code></pre>
<h3 id="apply"><a class="header" href="#apply">Apply</a></h3>
<p>We've seen an example where inside <code>pipe</code> every step produces a new value, which is then fed into the next function. This is very straightforward when we're dealing with single argument functions, but let's see an example how this would work when we introduce multi argument functions in the mix.</p>
<pre><code class="language-typescript">const result = pipe(
  1,
  increment, // 2
  multBy10, // 20
  add3Numbers, // first argument `a` (20) was partially applied
  (fn) =&gt; fn(30), // second argument `b` (30) was partially applied
  (fn) =&gt; fn(100) // last argument, `c` (100) was applied
); // 150
</code></pre>
<p>We can use <code>apply</code> to partially apply these values and reduce some boilerplate:</p>
<pre><code class="language-typescript">import { apply } from &quot;fp-ts/lib/function&quot;;

const result = pipe(
  1,
  increment,
  multBy10,
  add3Numbers,
  apply(30),
  apply(100) // 150
);
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="chapter1.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="chapter3.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="chapter1.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="chapter3.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
    </body>
</html>
